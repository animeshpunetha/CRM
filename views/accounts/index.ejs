<%- include('../partials/header') %>

<div class="card shadow-sm mb-4">
  <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
    <h2 class="card-title mb-0">All Accounts</h2>
    <div>
      <a href="/accounts/new" class="btn btn-light">New Account</a>
    </div>
  </div>
  <div class="card-body">
    <% if (accounts.length === 0) { %>
      <div class="alert alert-info" role="alert">
        No accounts found. Create your first account now!
      </div>
    <% } else { %>
      <div class="table-responsive">
        <table class="table table-hover table-striped">
          <thead class="table-light">
            <tr>
              <th>Owner</th>
              <th>Name</th>
              <th>Type</th>
              <th>Industry</th>
              <th>Billing Address</th>
              <th>Actions</th> </tr>
          </thead>
          <tbody>
            <% accounts.forEach(account => { %>
              <tr>
                <td><%= account.owner ? account.owner.name : 'â€”' %></td>
                <td><%= account.name %></td>
                <td><%= account.type %></td>
                <td><%= account.industry %></td>
                <td>
                  <%= account.billing_street %><br>
                  <%= account.billing_city %>, <%= account.billing_state %> <%= account.billing_code %><br>
                  <%= account.billing_country %>
                </td>
                <td class="text-nowrap">
                  <a href="/accounts/<%= account._id %>" class="btn btn-sm btn-info me-2">View</a>
                  <a href="/accounts/<%= account._id %>/edit" class="btn btn-sm btn-warning me-2">Edit</a>
                  <form action="/accounts/<%= account._id %>?_method=DELETE" method="POST" class="d-inline">
                    <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this account?')">Delete</button>
                  </form>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    <% } %>
  </div>
</div>

<%- include('../partials/footer') %>